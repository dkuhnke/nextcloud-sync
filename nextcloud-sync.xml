<?xml version="1.0"?>
<Container version="2">
  <Na  <Config Name="Local Data Directory" Target="/media/nextclouddata" Default="/mnt/user/nextcloud-sync/" Mode="rw" Description="Local directory path where your Nextcloud data will be synchronized. This directory should be accessible and writable by the container (UID/GID 1001). The security-hardened container will create subdirectories as needed to match your Nextcloud folder structure." Type="Path" Display="always" Required="true" Mask="false"/>e>nextcloud-sync</Name>
  <Repository>dkuhnke/nextcloud-sync</Repository>
  <Registry>https://hub.docker.com/r/dkuhnke/nextcloud-sync</Registry>
  <Network>bridge</Network>
  <MyIP/>
  <Shell>bash</Shell>
  <Privileged>false</Privileged>
  <Support>https://github.com/dkuhnke/nextcloud-sync/issues</Support>
  <Project>https://github.com/dkuhnke/nextcloud-sync</Project>
  <Overview>
    Nextcloud Sync Container v2.4 provides automated, continuous synchronization of your Nextcloud data with advanced error handling and security-optimized architecture.

    ðŸ”’ Security Improvements (v2.4):
    â€¢ Alpine Linux 3.22.1 base for minimal CVE exposure (80-90% fewer CVEs vs Debian)
    â€¢ Non-root execution with unprivileged user for enhanced security
    â€¢ Minimal dependencies (only nextcloud-client + bash) for reduced attack surface
    â€¢ Security-hardened container with removal of unnecessary binaries and files

    Key Features:
    â€¢ Continuous synchronization with configurable intervals
    â€¢ Automatic retry logic for connection failures with exponential backoff
    â€¢ Graceful shutdown with proper signal handling
    â€¢ Comprehensive logging with timestamps for monitoring and debugging
    â€¢ Health checks for connectivity and permission validation
    â€¢ Flexible modes: one-time sync or continuous operation
    â€¢ Robust error recovery with configurable retry attempts
    â€¢ Optimized performance with minimal resource footprint

    Security Note: It's highly recommended to use app-specific passwords instead of your main Nextcloud password. Create an app password in Nextcloud Settings â†’ Security â†’ Devices &amp; sessions.

    The container synchronizes your local data directory with your Nextcloud instance, providing reliable backup and synchronization capabilities with enterprise-grade security features.
  </Overview>
  <Category>Backup: Productivity: Tools:</Category>
  <WebUI/>
  <TemplateURL>https://raw.githubusercontent.com/dkuhnke/nextcloud-sync/main/nextcloud-sync.xml</TemplateURL>
  <Icon>https://raw.githubusercontent.com/dkuhnke/nextcloud-sync/main/icon.png</Icon>
  <ExtraParams/>
  <PostArgs/>
  <CPUset/>
  <DateInstalled/>
  <DonateText>If you find this container useful, consider supporting the developer</DonateText>
  <DonateLink>https://github.com/sponsors/dkuhnke</DonateLink>
  <Requires/>
  <Config Name="Nextcloud Username" Target="NEXTCLOUD_USER" Default="" Mode="" Description="Your Nextcloud username. This is the username you use to log into your Nextcloud instance." Type="Variable" Display="always" Required="true" Mask="false"/>
  <Config Name="Nextcloud Password/Token" Target="NEXTCLOUD_PASS" Default="" Mode="" Description="Your Nextcloud app password or token. For security reasons, it's highly recommended to create an app-specific password in Nextcloud Settings â†’ Security â†’ Devices &amp; sessions instead of using your main password." Type="Variable" Display="always" Required="true" Mask="true"/>
  <Config Name="Nextcloud Server URL" Target="NEXTCLOUD_URL" Default="" Mode="" Description="Your Nextcloud server hostname or URL (without http/https protocol). Example: cloud.example.com or nextcloud.mydomain.org" Type="Variable" Display="always" Required="true" Mask="false"/>
  <Config Name="Sync Interval (seconds)" Target="NEXTCLOUD_SLEEP" Default="300" Mode="" Description="Time interval between synchronization attempts in seconds. Default is 300 seconds (5 minutes). Increase for less frequent syncs or decrease for more frequent syncs." Type="Variable" Display="always" Required="false" Mask="false"/>
  <Config Name="Sync Retry Attempts" Target="NEXTCLOUD_SYNC_RETRIES" Default="4" Mode="" Description="Number of retry attempts when synchronization fails (1-10 range). The container uses exponential backoff between retry attempts. Increase this value for unstable network connections. v2.4 includes improved retry logic with better error handling." Type="Variable" Display="always" Required="false" Mask="false"/>
  <Config Name="Run Once Mode" Target="NEXTCLOUD_RUN_ONCE" Default="false" Mode="" Description="Set to 'true' to run synchronization once and exit, or 'false' for continuous operation. Use 'true' for scheduled one-time syncs via Unraid User Scripts." Type="Variable" Display="always" Required="false" Mask="false"/>
  <Config Name="Local Data Directory" Target="/media/nextclouddata" Default="/mnt/user/nextcloud-sync/" Mode="rw" Description="Local directory path where your Nextcloud data will be synchronized. This directory should be accessible and writable by the container. The container will create subdirectories as needed to match your Nextcloud folder structure." Type="Path" Display="always" Required="true" Mask="false"/>
  <Config Name="Log Directory (Optional)" Target="/var/log/nextcloud-sync" Default="" Mode="rw" Description="Optional: Mount a local directory to persist container logs. Leave empty if you don't need persistent logging." Type="Path" Display="advanced" Required="false" Mask="false"/>
</Container>
